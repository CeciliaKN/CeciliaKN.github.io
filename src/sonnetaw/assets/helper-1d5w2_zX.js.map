{"version":3,"file":"helper-1d5w2_zX.js","sources":["../../rhyme-helper.html?html-proxy&index=1.js"],"sourcesContent":["\n    import { DictionaryService } from './src/dictionary.js';\n    import { getDictionaryUrl } from './src/config.js';\n\n    const wordInput = document.getElementById('wordInput');\n    const searchBtn = document.getElementById('searchBtn');\n    const resultsSection = document.getElementById('resultsSection');\n    const filterSection = document.getElementById('filterSection');\n    const wordGrid = document.getElementById('wordGrid');\n    const resultCount = document.getElementById('resultCount');\n    const loadingIndicator = document.getElementById('loadingIndicator');\n    const syllableFilter = document.getElementById('syllableFilter');\n    const sortFilter = document.getElementById('sortFilter');\n\n    const dictionary = new DictionaryService();\n    let dictionaryData = null;\n    let allRhymes = [];\n\n    // Load dictionary on startup\n    async function loadDictionary() {\n      loadingIndicator.style.display = 'block';\n      try {\n        const response = await fetch(getDictionaryUrl('en'));\n        if (!response.ok) {\n          throw new Error('Failed to load dictionary');\n        }\n        dictionaryData = await response.json();\n        await dictionary.loadDictionary(dictionaryData, 'en');\n        console.log('Dictionary loaded successfully');\n        loadingIndicator.style.display = 'none';\n      } catch (error) {\n        console.error('Error loading dictionary:', error);\n        loadingIndicator.innerHTML = '<p style=\"color: red;\">Failed to load dictionary. Please refresh the page.</p>';\n      }\n    }\n\n    // Find all rhyming words\n    function findRhymes(word) {\n      if (!dictionaryData) return [];\n\n      const phonemes = dictionary.lookup(word);\n      if (!phonemes) {\n        alert(`Word \"${word}\" not found in dictionary.`);\n        return [];\n      }\n\n      const targetRhymeKey = dictionary.extractRhymeKey(phonemes);\n      if (!targetRhymeKey) {\n        alert(`Could not extract rhyme key for \"${word}\".`);\n        return [];\n      }\n\n      console.log(`Finding rhymes for \"${word}\" with rhyme key: ${targetRhymeKey}`);\n\n      const rhymes = [];\n      for (const [dictWord, pronunciations] of Object.entries(dictionaryData)) {\n        if (dictWord === word.toLowerCase()) continue; // Skip the word itself\n\n        const wordPhonemes = pronunciations[0];\n        const rhymeKey = dictionary.extractRhymeKey(wordPhonemes);\n\n        if (rhymeKey === targetRhymeKey) {\n          const syllables = dictionary.extractSyllables(wordPhonemes);\n          rhymes.push({\n            word: dictWord,\n            phonemes: wordPhonemes,\n            syllableCount: syllables.length,\n            rhymeKey: rhymeKey\n          });\n        }\n      }\n\n      return rhymes;\n    }\n\n    // Apply filters and sorting\n    function filterAndSort(rhymes) {\n      let filtered = [...rhymes];\n\n      // Filter by syllable count\n      const syllableFilterValue = syllableFilter.value;\n      if (syllableFilterValue !== 'all') {\n        if (syllableFilterValue === '4+') {\n          filtered = filtered.filter(r => r.syllableCount >= 4);\n        } else {\n          const count = parseInt(syllableFilterValue);\n          filtered = filtered.filter(r => r.syllableCount === count);\n        }\n      }\n\n      // Sort\n      const sortValue = sortFilter.value;\n      if (sortValue === 'alpha') {\n        filtered.sort((a, b) => a.word.localeCompare(b.word));\n      } else if (sortValue === 'syllables') {\n        filtered.sort((a, b) => a.syllableCount - b.syllableCount);\n      } else if (sortValue === 'common') {\n        // Simple heuristic: shorter words are often more common\n        filtered.sort((a, b) => a.word.length - b.word.length);\n      }\n\n      return filtered;\n    }\n\n    // Display rhyming words\n    function displayRhymes(rhymes) {\n      wordGrid.innerHTML = '';\n\n      if (rhymes.length === 0) {\n        wordGrid.innerHTML = '<div class=\"no-results\">No rhyming words found.</div>';\n        resultCount.textContent = '0 words found';\n        return;\n      }\n\n      resultCount.textContent = `${rhymes.length} word${rhymes.length > 1 ? 's' : ''} found`;\n\n      for (const rhyme of rhymes) {\n        const card = document.createElement('div');\n        card.className = 'word-card';\n        card.onclick = () => {\n          wordInput.value = rhyme.word;\n          searchBtn.click();\n        };\n\n        const wordDiv = document.createElement('div');\n        wordDiv.className = 'word';\n        wordDiv.textContent = rhyme.word;\n\n        const phonemesDiv = document.createElement('div');\n        phonemesDiv.className = 'phonemes';\n        phonemesDiv.textContent = rhyme.phonemes.join(' ');\n\n        const syllablesDiv = document.createElement('div');\n        syllablesDiv.className = 'syllables';\n        syllablesDiv.textContent = `${rhyme.syllableCount} syllable${rhyme.syllableCount > 1 ? 's' : ''}`;\n\n        card.appendChild(wordDiv);\n        card.appendChild(phonemesDiv);\n        card.appendChild(syllablesDiv);\n        wordGrid.appendChild(card);\n      }\n    }\n\n    // Search handler\n    function handleSearch() {\n      const word = wordInput.value.trim().toLowerCase();\n      if (!word) {\n        alert('Please enter a word.');\n        return;\n      }\n\n      allRhymes = findRhymes(word);\n      \n      if (allRhymes.length > 0) {\n        resultsSection.style.display = 'block';\n        filterSection.style.display = 'flex';\n        const filtered = filterAndSort(allRhymes);\n        displayRhymes(filtered);\n      } else {\n        resultsSection.style.display = 'block';\n        filterSection.style.display = 'none';\n        displayRhymes([]);\n      }\n    }\n\n    // Event listeners\n    searchBtn.addEventListener('click', handleSearch);\n    wordInput.addEventListener('keypress', (e) => {\n      if (e.key === 'Enter') {\n        handleSearch();\n      }\n    });\n\n    syllableFilter.addEventListener('change', () => {\n      if (allRhymes.length > 0) {\n        const filtered = filterAndSort(allRhymes);\n        displayRhymes(filtered);\n      }\n    });\n\n    sortFilter.addEventListener('change', () => {\n      if (allRhymes.length > 0) {\n        const filtered = filterAndSort(allRhymes);\n        displayRhymes(filtered);\n      }\n    });\n\n    // Load dictionary on page load\n    loadDictionary();\n\n    console.log('Rhyme Helper loaded successfully!');\n  "],"names":["wordInput","searchBtn","resultsSection","filterSection","wordGrid","resultCount","loadingIndicator","syllableFilter","sortFilter","dictionary","DictionaryService","dictionaryData","allRhymes","loadDictionary","response","getDictionaryUrl","error","findRhymes","word","phonemes","targetRhymeKey","rhymes","dictWord","pronunciations","wordPhonemes","rhymeKey","syllables","filterAndSort","filtered","syllableFilterValue","r","count","sortValue","a","b","displayRhymes","rhyme","card","wordDiv","phonemesDiv","syllablesDiv","handleSearch"],"mappings":"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"}